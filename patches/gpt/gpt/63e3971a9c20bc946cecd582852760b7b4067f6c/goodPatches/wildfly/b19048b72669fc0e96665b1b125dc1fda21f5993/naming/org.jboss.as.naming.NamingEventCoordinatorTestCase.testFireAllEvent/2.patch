victim
:code:
{'fields': {}, 'methods': {'testFireAllEvent': 'public void testFireAllEvent() throws Exception {\n    \n\n    // Reset the active NamingStore to ensure a clean state\n    NamingContext.setActiveNamingStore(new InMemoryNamingStore());\n    \n\n\n    final NamingEventCoordinator coordinator = new NamingEventCoordinator();\n\n    final CollectingListener objectListener = new CollectingListener(1);\n    coordinator.addListener("test/path", EventContext.OBJECT_SCOPE, objectListener);\n    final CollectingListener subtreeListener = new CollectingListener(1);\n    coordinator.addListener("test", EventContext.SUBTREE_SCOPE, subtreeListener);\n    final CollectingListener oneLevelListener = new CollectingListener(1);\n    coordinator.addListener("test", EventContext.ONELEVEL_SCOPE, oneLevelListener);\n\n    coordinator.fireEvent(context, new CompositeName("test/path"), null, null, NamingEvent.OBJECT_ADDED, "bind", EventContext.OBJECT_SCOPE, EventContext.ONELEVEL_SCOPE, EventContext.SUBTREE_SCOPE);\n\n    objectListener.latch.await(1, TimeUnit.SECONDS);\n    oneLevelListener.latch.await(1, TimeUnit.SECONDS);\n    subtreeListener.latch.await(1, TimeUnit.SECONDS);\n\n    assertEquals(1, objectListener.capturedEvents.size());\n    assertEquals(1, subtreeListener.capturedEvents.size());\n    assertEquals(1, oneLevelListener.capturedEvents.size());\n}\n', 'testPermissions': 'public void testPermissions() throws Exception {\n    \n\n    // Reset the active NamingStore to ensure a clean state\n    NamingContext.setActiveNamingStore(new InMemoryNamingStore());\n    \n\n\n    final NamingContext namingContext = new NamingContext(store, null);\n    final String name = "a/b";\n    final Object value = new Object();\n    ArrayList<JndiPermission> permissions = new ArrayList<JndiPermission>();\n\n    // simple bind test, note that permission must have absolute path\n    WritableServiceBasedNamingStore.pushOwner(OWNER_FOO);\n    try {\n        permissions.add(new JndiPermission(store.getBaseName()+"/"+name,"bind,list,listBindings"));\n        store.bind(new CompositeName(name), value);\n    } finally {\n        WritableServiceBasedNamingStore.popOwner();\n    }\n\n    // rest of the code...\n}\n'}}victim
:import:
[]victim
:pom:
victim
:toreplace:
{'field_names': [], 'method_names': ['testFireAllEvent', 'testPermissions']}polluter
:code:
{'fields': {}, 'methods': {'testFireAllEvent': 'public void testFireAllEvent() throws Exception {\n    \n\n    // Reset the active NamingStore to ensure a clean state\n    NamingContext.setActiveNamingStore(new InMemoryNamingStore());\n    \n\n\n    final NamingEventCoordinator coordinator = new NamingEventCoordinator();\n\n    final CollectingListener objectListener = new CollectingListener(1);\n    coordinator.addListener("test/path", EventContext.OBJECT_SCOPE, objectListener);\n    final CollectingListener subtreeListener = new CollectingListener(1);\n    coordinator.addListener("test", EventContext.SUBTREE_SCOPE, subtreeListener);\n    final CollectingListener oneLevelListener = new CollectingListener(1);\n    coordinator.addListener("test", EventContext.ONELEVEL_SCOPE, oneLevelListener);\n\n    coordinator.fireEvent(context, new CompositeName("test/path"), null, null, NamingEvent.OBJECT_ADDED, "bind", EventContext.OBJECT_SCOPE, EventContext.ONELEVEL_SCOPE, EventContext.SUBTREE_SCOPE);\n\n    objectListener.latch.await(1, TimeUnit.SECONDS);\n    oneLevelListener.latch.await(1, TimeUnit.SECONDS);\n    subtreeListener.latch.await(1, TimeUnit.SECONDS);\n\n    assertEquals(1, objectListener.capturedEvents.size());\n    assertEquals(1, subtreeListener.capturedEvents.size());\n    assertEquals(1, oneLevelListener.capturedEvents.size());\n}\n', 'testPermissions': 'public void testPermissions() throws Exception {\n    \n\n    // Reset the active NamingStore to ensure a clean state\n    NamingContext.setActiveNamingStore(new InMemoryNamingStore());\n    \n\n\n    final NamingContext namingContext = new NamingContext(store, null);\n    final String name = "a/b";\n    final Object value = new Object();\n    ArrayList<JndiPermission> permissions = new ArrayList<JndiPermission>();\n\n    // simple bind test, note that permission must have absolute path\n    WritableServiceBasedNamingStore.pushOwner(OWNER_FOO);\n    try {\n        permissions.add(new JndiPermission(store.getBaseName()+"/"+name,"bind,list,listBindings"));\n        store.bind(new CompositeName(name), value);\n    } finally {\n        WritableServiceBasedNamingStore.popOwner();\n    }\n\n    // rest of the code...\n}\n'}}polluter
:import:
[]polluter
:pom:
polluter
:toreplace:
{'field_names': [], 'method_names': ['testFireAllEvent', 'testPermissions']}